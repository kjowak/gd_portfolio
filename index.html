<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Telemetry</title>
        <link rel="stylesheet" href="\static\solar.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.4/socket.io.js" integrity="sha512-aMGMvNYu8Ue4G+fHa359jcPb1u+ytAF+P2SCb+PxrjCdO3n3ZTxJ30zuH39rimUggmTwmh2u7wvQsDTHESnmfQ==" crossorigin="anonymous"></script>
        <script type="text/javascript" charset="utf-8">
            $(document).ready(function() {
                var socket = io();

                socket.on('CAN_update', function(data, cb) {
                    $('#rt').text(data.rt + ' s');
                    $('#hr').text(data.hr + ' Ω');
                    $('#lr').text(data.lr + ' Ω');
                    $('#ar').text(data.ar + ' Ω');
                    $('#dr').text(data.dr + ' Ω');
                    $('#hv').text(data.hv + ' V');
                    $('#lv').text(data.lv + ' V');
                    $('#av').text(data.av + ' V');
                    $('#dv').text(data.dv + ' V');
                    $('#thi').text(data.thi + ' C');
                    $('#tl').text(data.tl + ' C');
                    $('#ps').text(data.ps + '%');
                    $('#pa').text(data.pa + ' A h');
                    $('#pv').text(data.pv + ' V');
                    $('#cl').text(data.cl);
                    if (cb)
                        cb();
                });
            });
        </script>
    </head>
    <body>
        <header>
            <img src="https://www.msusolar.com/wp-content/uploads/2019/10/MSU-SRT-GREEN-ALT-WO-TEXT.png"
                 alt="didn't load right" class="logo">
            <h1 class="title">Solar Telemetry</h1>
        </header>
        <table>
            <thead>
                <tr>
                    <th>Element</th>
                    <th>Value</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Run Time</td>
                    <td id="rt">{{ data.rt }} s</td>
                </tr>
                <tr>
                    <td>H. Res</td>
                    <td id="hr">{{ data.hr }} Ω</td>
                </tr>
                <tr>
                    <td>L. Res</td>
                    <td id="lr">{{ data.lr }} Ω</td>
                </tr>
                <tr>
                    <td>Avg. Res</td>
                    <td id="ar">{{ data.ar }} Ω</td>
                </tr>
                <tr>
                    <td>Delta Res</td>
                    <td id="dr">{{ data.dr }} Ω</td>
                </tr>
                <tr>
                    <td>H. Voltage</td>
                    <td id="hv">{{ data.hv }} V</td>
                </tr>
                <tr>
                    <td>L. Voltage</td>
                    <td id="lv">{{ data.lv }} V</td>
                </tr>
                <tr>
                    <td>Avg. Voltage</td>
                    <td id="av">{{ data.av }} V</td>
                </tr>
                <tr>
                    <td>Delta Voltage</td>
                    <td id="dv">{{ data.dv }} V</td>
                </tr>
                <tr>
                    <td>Temp High</td>
                    <td id="thi">{{ data.thi }} C</td>
                </tr>
                <tr>
                    <td>Temp Low</td>
                    <td id="tl">{{ data.tl }} C</td>
                </tr>
                <tr>
                    <td>Pack Soc</td>
                    <td id="ps">{{ data.ps }}%</td>
                </tr>
                <tr>
                    <td>Pack Amps</td>
                    <td id="pa">{{ data.pa }} A h</td>
                </tr>
                <tr>
                    <td>Pack Voltage</td>
                    <td id="pv">{{ data.pv }} V</td>
                </tr>
                <tr>
                    <td>Current Limit</td>
                    <td id="cl">{{ data.cl }}</td>
                </tr>
            </tbody>
        </table>
        <div id="log"></div>
    </body>
</html>